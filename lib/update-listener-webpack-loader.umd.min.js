(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("vue")):"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["update-listener-webpack-loader"]=t(require("vue")):e["update-listener-webpack-loader"]=t(e["Vue"])})("undefined"!==typeof self?self:this,(function(e){return function(){var t={318:function(e,t,n){var o={"./element.vue":[734,734],"./qingmu.vue":[164,164]};function r(e){if(!n.o(o,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=o[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(o)},r.id=318,e.exports=r},203:function(t){"use strict";t.exports=e}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,o),i.exports}o.m=t,function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(t,n){return o.f[n](e,t),t}),[]))}}(),function(){o.u=function(e){return"update-listener-webpack-loader.umd.min."+e+".js"}}(),function(){o.miniCssF=function(e){return"css/"+e+"."+{164:"4d50cfe2",734:"01931c5f"}[e]+".css"}}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="update-listener-webpack-loader:";o.l=function(n,r,i,a){if(e[n])e[n].push(r);else{var u,c;if(void 0!==i)for(var s=document.getElementsByTagName("script"),d=0;d<s.length;d++){var l=s[d];if(l.getAttribute("src")==n||l.getAttribute("data-webpack")==t+i){u=l;break}}u||(c=!0,u=document.createElement("script"),u.charset="utf-8",u.timeout=120,o.nc&&u.setAttribute("nonce",o.nc),u.setAttribute("data-webpack",t+i),u.src=n),e[n]=[r];var f=function(t,o){u.onerror=u.onload=null,clearTimeout(p);var r=e[n];if(delete e[n],u.parentNode&&u.parentNode.removeChild(u),r&&r.forEach((function(e){return e(o)})),t)return t(o)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=f.bind(null,u.onerror),u.onload=f.bind(null,u.onload),c&&document.head.appendChild(u)}}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p=""}(),function(){if("undefined"!==typeof document){var e=function(e,t,n,o,r){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css";var a=function(n){if(i.onerror=i.onload=null,"load"===n.type)o();else{var a=n&&("load"===n.type?"missing":n.type),u=n&&n.target&&n.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+u+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=a,c.request=u,i.parentNode&&i.parentNode.removeChild(i),r(c)}};return i.onerror=i.onload=a,i.href=t,n?n.parentNode.insertBefore(i,n.nextSibling):document.head.appendChild(i),i},t=function(e,t){for(var n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var r=n[o],i=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(i===e||i===t))return r}var a=document.getElementsByTagName("style");for(o=0;o<a.length;o++){r=a[o],i=r.getAttribute("data-href");if(i===e||i===t)return r}},n=function(n){return new Promise((function(r,i){var a=o.miniCssF(n),u=o.p+a;if(t(a,u))return r();e(n,u,null,r,i)}))},r={546:0};o.f.miniCss=function(e,t){var o={164:1,734:1};r[e]?t.push(r[e]):0!==r[e]&&o[e]&&t.push(r[e]=n(e).then((function(){r[e]=0}),(function(t){throw delete r[e],t})))}}}(),function(){var e={546:0};o.f.j=function(t,n){var r=o.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise((function(n,o){r=e[t]=[n,o]}));n.push(r[2]=i);var a=o.p+o.u(t),u=new Error,c=function(n){if(o.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;u.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",u.name="ChunkLoadError",u.type=i,u.request=a,r[1](u)}};o.l(a,c,"chunk-"+t,t)}};var t=function(t,n){var r,i,a=n[0],u=n[1],c=n[2],s=0;if(a.some((function(t){return 0!==e[t]}))){for(r in u)o.o(u,r)&&(o.m[r]=u[r]);if(c)c(o)}for(t&&t(n);s<a.length;s++)i=a[s],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=("undefined"!==typeof self?self:this)["webpackChunkupdate_listener_webpack_loader"]=("undefined"!==typeof self?self:this)["webpackChunkupdate_listener_webpack_loader"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var r={};return function(){"use strict";if(o.r(r),o.d(r,{default:function(){return l}}),"undefined"!==typeof window){var e=window.document.currentScript,t=e&&e.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);t&&(o.p=t[1])}var n=o(203),i=o.n(n);function a(e,t,n){return(o,r=!0)=>new Promise(((a,u)=>{const c=i().extend(e),s=Object.assign({},t,o),d=new c({el:document.createElement("div"),propsData:s});d.$on("cancel",(function(e){this.$destroy();const t=this.$el.parentElement;t&&t.removeChild(this.$el),u(e)})),d.$on("confirm",(function(e){if(r){this.$destroy();const e=this.$el.parentElement;e&&e.removeChild(this.$el)}a(e,this)})),n||(n=document.body),n.appendChild(d.$el)}))}async function u(e,t){const n=(await o(318)(`./${e.type}.vue`)).default;return a(n,e,t)()}const c={install(e,t){let n,o;const r=async()=>fetch(`${t.versionUrl||"/dist"}/version.json?timeStamp=`+Date.now()).then((e=>e.json())).catch((e=>{console.log(e)})),i=async()=>{const e=(await r()).commitHash;return e!==n},a=()=>{o&&(console.log("停止检查更新"),clearInterval(o),o="")},c=async()=>{if(!1===t.isTip)return;const e=await r();e&&(n=e.commitHash,console.log("开始检查更新"),o=setInterval((async()=>{const t=await i();t&&e.isTip&&(console.log("有新版本"),a(),await s())}),t.interval||3e5))},s=async()=>{try{const e=t.modalProps&&t.modalProps.content;await u({content:e?t.modalProps.content:"为了更好的版本体验请更新到最新版本",type:t.type||"qingmu"},t.modalProps&&t.modalProps.mountedEl),window.location.reload()}catch(e){console.log(e)}},d=()=>{document.hidden?a():c()};document.addEventListener("visibilitychange",d);const l=async e=>{"SCRIPT"===e.target.nodeName&&(a(),await s())};t.isListenJSError&&window.addEventListener("error",l),c()}};var s=c,d=s,l=d}(),r}()}));
//# sourceMappingURL=update-listener-webpack-loader.umd.min.js.map